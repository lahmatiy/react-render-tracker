var be=Object.create;var pe=Object.defineProperty;var ge=Object.getOwnPropertyDescriptor;var ve=Object.getOwnPropertyNames;var we=Object.getPrototypeOf,xe=Object.prototype.hasOwnProperty;var ke=(l,t)=>()=>(t||l((t={exports:{}}).exports,t),t.exports);var Ee=(l,t,n,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let c of ve(t))!xe.call(l,c)&&c!==n&&pe(l,c,{get:()=>t[c],enumerable:!(e=ge(t,c))||e.enumerable});return l};var Ae=(l,t,n)=>(n=l!=null?be(we(l)):{},Ee(t||!l||!l.__esModule?pe(n,"default",{value:l,enumerable:!0}):n,l));var fe=ke((Z,re)=>{(function(l,t){typeof Z=="object"&&typeof re=="object"?re.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Z=="object"?Z.io=t():l.io=t()})(Z,function(){return function(l){function t(e){if(n[e])return n[e].exports;var c=n[e]={exports:{},id:e,loaded:!1};return l[e].call(c.exports,c,c.exports,t),c.loaded=!0,c.exports}var n={};return t.m=l,t.c=n,t.p="",t(0)}([function(l,t,n){"use strict";function e(b,u){(typeof b>"u"?"undefined":c(b))==="object"&&(u=b,b=void 0),u=u||{};var s,a=i(b),r=a.source,o=a.id,p=a.path,y=m[o]&&p in m[o].nsps,f=u.forceNew||u["force new connection"]||u.multiplex===!1||y;return f?s=d(r,u):(m[o]||(m[o]=d(r,u)),s=m[o]),a.query&&!u.query&&(u.query=a.query),s.socket(a.path,u)}var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},i=n(1),h=n(4),d=n(9);n(3)("socket.io-client"),l.exports=t=e;var m=t.managers={};t.protocol=h.protocol,t.connect=e,t.Manager=n(9),t.Socket=n(34)},function(l,t,n){"use strict";function e(i,h){var d=i;h=h||typeof location<"u"&&location,i==null&&(i=h.protocol+"//"+h.host),typeof i=="string"&&(i.charAt(0)==="/"&&(i=i.charAt(1)==="/"?h.protocol+i:h.host+i),/^(https?|wss?):\/\//.test(i)||(i=typeof h<"u"?h.protocol+"//"+i:"https://"+i),d=c(i)),d.port||(/^(http|ws)$/.test(d.protocol)?d.port="80":/^(http|ws)s$/.test(d.protocol)&&(d.port="443")),d.path=d.path||"/";var m=d.host.indexOf(":")!==-1,b=m?"["+d.host+"]":d.host;return d.id=d.protocol+"://"+b+":"+d.port,d.href=d.protocol+"://"+b+(h&&h.port===d.port?"":":"+d.port),d}var c=n(2);n(3)("socket.io-client:url"),l.exports=e},function(l,t){function n(h,d){var m=/\/{2,9}/g,b=d.replace(m,"/").split("/");return d.substr(0,1)!="/"&&d.length!==0||b.splice(0,1),d.substr(d.length-1,1)=="/"&&b.splice(b.length-1,1),b}function e(h,d){var m={};return d.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(b,u,s){u&&(m[u]=s)}),m}var c=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];l.exports=function(h){var d=h,m=h.indexOf("["),b=h.indexOf("]");m!=-1&&b!=-1&&(h=h.substring(0,m)+h.substring(m,b).replace(/:/g,";")+h.substring(b,h.length));for(var u=c.exec(h||""),s={},a=14;a--;)s[i[a]]=u[a]||"";return m!=-1&&b!=-1&&(s.source=d,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=n(s,s.path),s.queryKey=e(s,s.query),s}},function(l,t){"use strict";l.exports=function(){return function(){}}},function(l,t,n){function e(){}function c(f){var v=""+f.type;if(t.BINARY_EVENT!==f.type&&t.BINARY_ACK!==f.type||(v+=f.attachments+"-"),f.nsp&&f.nsp!=="/"&&(v+=f.nsp+","),f.id!=null&&(v+=f.id),f.data!=null){var w=i(f.data);if(w===!1)return y;v+=w}return v}function i(f){try{return JSON.stringify(f)}catch{return!1}}function h(f,v){function w(k){var S=r.deconstructPacket(k),g=c(S.packet),x=S.buffers;x.unshift(g),v(x)}r.removeBlobs(f,w)}function d(){this.reconstructor=null}function m(f){var v=0,w={type:Number(f.charAt(0))};if(t.types[w.type]==null)return s("unknown packet type "+w.type);if(t.BINARY_EVENT===w.type||t.BINARY_ACK===w.type){for(var k="";f.charAt(++v)!=="-"&&(k+=f.charAt(v),v!=f.length););if(k!=Number(k)||f.charAt(v)!=="-")throw new Error("Illegal attachments");w.attachments=Number(k)}if(f.charAt(v+1)==="/")for(w.nsp="";++v;){var S=f.charAt(v);if(S===","||(w.nsp+=S,v===f.length))break}else w.nsp="/";var g=f.charAt(v+1);if(g!==""&&Number(g)==g){for(w.id="";++v;){var S=f.charAt(v);if(S==null||Number(S)!=S){--v;break}if(w.id+=f.charAt(v),v===f.length)break}w.id=Number(w.id)}if(f.charAt(++v)){var x=b(f.substr(v)),E=x!==!1&&(w.type===t.ERROR||o(x));if(!E)return s("invalid payload");w.data=x}return w}function b(f){try{return JSON.parse(f)}catch{return!1}}function u(f){this.reconPack=f,this.buffers=[]}function s(f){return{type:t.ERROR,data:"parser error: "+f}}var a=(n(3)("socket.io-parser"),n(5)),r=n(6),o=n(7),p=n(8);t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=e,t.Decoder=d;var y=t.ERROR+'"encode error"';e.prototype.encode=function(f,v){if(t.BINARY_EVENT===f.type||t.BINARY_ACK===f.type)h(f,v);else{var w=c(f);v([w])}},a(d.prototype),d.prototype.add=function(f){var v;if(typeof f=="string")v=m(f),t.BINARY_EVENT===v.type||t.BINARY_ACK===v.type?(this.reconstructor=new u(v),this.reconstructor.reconPack.attachments===0&&this.emit("decoded",v)):this.emit("decoded",v);else{if(!p(f)&&!f.base64)throw new Error("Unknown type: "+f);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");v=this.reconstructor.takeBinaryData(f),v&&(this.reconstructor=null,this.emit("decoded",v))}},d.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},u.prototype.takeBinaryData=function(f){if(this.buffers.push(f),this.buffers.length===this.reconPack.attachments){var v=r.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),v}return null},u.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(l,t,n){function e(i){if(i)return c(i)}function c(i){for(var h in e.prototype)i[h]=e.prototype[h];return i}l.exports=e,e.prototype.on=e.prototype.addEventListener=function(i,h){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(h),this},e.prototype.once=function(i,h){function d(){this.off(i,d),h.apply(this,arguments)}return d.fn=h,this.on(i,d),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(i,h){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var d=this._callbacks["$"+i];if(!d)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var m,b=0;b<d.length;b++)if(m=d[b],m===h||m.fn===h){d.splice(b,1);break}return d.length===0&&delete this._callbacks["$"+i],this},e.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var h=new Array(arguments.length-1),d=this._callbacks["$"+i],m=1;m<arguments.length;m++)h[m-1]=arguments[m];if(d){d=d.slice(0);for(var m=0,b=d.length;m<b;++m)d[m].apply(this,h)}return this},e.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]},e.prototype.hasListeners=function(i){return!!this.listeners(i).length}},function(l,t,n){function e(u,s){if(!u)return u;if(h(u)){var a={_placeholder:!0,num:s.length};return s.push(u),a}if(i(u)){for(var r=new Array(u.length),o=0;o<u.length;o++)r[o]=e(u[o],s);return r}if(typeof u=="object"&&!(u instanceof Date)){var r={};for(var p in u)r[p]=e(u[p],s);return r}return u}function c(u,s){if(!u)return u;if(u&&u._placeholder)return s[u.num];if(i(u))for(var a=0;a<u.length;a++)u[a]=c(u[a],s);else if(typeof u=="object")for(var r in u)u[r]=c(u[r],s);return u}var i=n(7),h=n(8),d=Object.prototype.toString,m=typeof Blob=="function"||typeof Blob<"u"&&d.call(Blob)==="[object BlobConstructor]",b=typeof File=="function"||typeof File<"u"&&d.call(File)==="[object FileConstructor]";t.deconstructPacket=function(u){var s=[],a=u.data,r=u;return r.data=e(a,s),r.attachments=s.length,{packet:r,buffers:s}},t.reconstructPacket=function(u,s){return u.data=c(u.data,s),u.attachments=void 0,u},t.removeBlobs=function(u,s){function a(p,y,f){if(!p)return p;if(m&&p instanceof Blob||b&&p instanceof File){r++;var v=new FileReader;v.onload=function(){f?f[y]=this.result:o=this.result,--r||s(o)},v.readAsArrayBuffer(p)}else if(i(p))for(var w=0;w<p.length;w++)a(p[w],w,p);else if(typeof p=="object"&&!h(p))for(var k in p)a(p[k],k,p)}var r=0,o=u;a(o),r||s(o)}},function(l,t){var n={}.toString;l.exports=Array.isArray||function(e){return n.call(e)=="[object Array]"}},function(l,t){function n(h){return e&&Buffer.isBuffer(h)||c&&(h instanceof ArrayBuffer||i(h))}l.exports=n;var e=typeof Buffer=="function"&&typeof Buffer.isBuffer=="function",c=typeof ArrayBuffer=="function",i=function(h){return typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(h):h.buffer instanceof ArrayBuffer}},function(l,t,n){"use strict";function e(o,p){if(!(this instanceof e))return new e(o,p);o&&(typeof o>"u"?"undefined":c(o))==="object"&&(p=o,o=void 0),p=p||{},p.path=p.path||"/socket.io",this.nsps={},this.subs=[],this.opts=p,this.reconnection(p.reconnection!==!1),this.reconnectionAttempts(p.reconnectionAttempts||1/0),this.reconnectionDelay(p.reconnectionDelay||1e3),this.reconnectionDelayMax(p.reconnectionDelayMax||5e3),this.randomizationFactor(p.randomizationFactor||.5),this.backoff=new a({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(p.timeout==null?2e4:p.timeout),this.readyState="closed",this.uri=o,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var y=p.parser||m;this.encoder=new y.Encoder,this.decoder=new y.Decoder,this.autoConnect=p.autoConnect!==!1,this.autoConnect&&this.open()}var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},i=n(10),h=n(34),d=n(5),m=n(4),b=n(36),u=n(37),s=(n(3)("socket.io-client:manager"),n(33)),a=n(38),r=Object.prototype.hasOwnProperty;l.exports=e,e.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var o in this.nsps)r.call(this.nsps,o)&&this.nsps[o].emit.apply(this.nsps[o],arguments)},e.prototype.updateSocketIds=function(){for(var o in this.nsps)r.call(this.nsps,o)&&(this.nsps[o].id=this.generateId(o))},e.prototype.generateId=function(o){return(o==="/"?"":o+"#")+this.engine.id},d(e.prototype),e.prototype.reconnection=function(o){return arguments.length?(this._reconnection=!!o,this):this._reconnection},e.prototype.reconnectionAttempts=function(o){return arguments.length?(this._reconnectionAttempts=o,this):this._reconnectionAttempts},e.prototype.reconnectionDelay=function(o){return arguments.length?(this._reconnectionDelay=o,this.backoff&&this.backoff.setMin(o),this):this._reconnectionDelay},e.prototype.randomizationFactor=function(o){return arguments.length?(this._randomizationFactor=o,this.backoff&&this.backoff.setJitter(o),this):this._randomizationFactor},e.prototype.reconnectionDelayMax=function(o){return arguments.length?(this._reconnectionDelayMax=o,this.backoff&&this.backoff.setMax(o),this):this._reconnectionDelayMax},e.prototype.timeout=function(o){return arguments.length?(this._timeout=o,this):this._timeout},e.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()},e.prototype.open=e.prototype.connect=function(o,p){if(~this.readyState.indexOf("open"))return this;this.engine=i(this.uri,this.opts);var y=this.engine,f=this;this.readyState="opening",this.skipReconnect=!1;var v=b(y,"open",function(){f.onopen(),o&&o()}),w=b(y,"error",function(g){if(f.cleanup(),f.readyState="closed",f.emitAll("connect_error",g),o){var x=new Error("Connection error");x.data=g,o(x)}else f.maybeReconnectOnOpen()});if(this._timeout!==!1){var k=this._timeout;k===0&&v.destroy();var S=setTimeout(function(){v.destroy(),y.close(),y.emit("error","timeout"),f.emitAll("connect_timeout",k)},k);this.subs.push({destroy:function(){clearTimeout(S)}})}return this.subs.push(v),this.subs.push(w),this},e.prototype.onopen=function(){this.cleanup(),this.readyState="open",this.emit("open");var o=this.engine;this.subs.push(b(o,"data",u(this,"ondata"))),this.subs.push(b(o,"ping",u(this,"onping"))),this.subs.push(b(o,"pong",u(this,"onpong"))),this.subs.push(b(o,"error",u(this,"onerror"))),this.subs.push(b(o,"close",u(this,"onclose"))),this.subs.push(b(this.decoder,"decoded",u(this,"ondecoded")))},e.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},e.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},e.prototype.ondata=function(o){this.decoder.add(o)},e.prototype.ondecoded=function(o){this.emit("packet",o)},e.prototype.onerror=function(o){this.emitAll("error",o)},e.prototype.socket=function(o,p){function y(){~s(v.connecting,f)||v.connecting.push(f)}var f=this.nsps[o];if(!f){f=new h(this,o,p),this.nsps[o]=f;var v=this;f.on("connecting",y),f.on("connect",function(){f.id=v.generateId(o)}),this.autoConnect&&y()}return f},e.prototype.destroy=function(o){var p=s(this.connecting,o);~p&&this.connecting.splice(p,1),this.connecting.length||this.close()},e.prototype.packet=function(o){var p=this;o.query&&o.type===0&&(o.nsp+="?"+o.query),p.encoding?p.packetBuffer.push(o):(p.encoding=!0,this.encoder.encode(o,function(y){for(var f=0;f<y.length;f++)p.engine.write(y[f],o.options);p.encoding=!1,p.processPacketQueue()}))},e.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var o=this.packetBuffer.shift();this.packet(o)}},e.prototype.cleanup=function(){for(var o=this.subs.length,p=0;p<o;p++){var y=this.subs.shift();y.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},e.prototype.close=e.prototype.disconnect=function(){this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},e.prototype.onclose=function(o){this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",o),this._reconnection&&!this.skipReconnect&&this.reconnect()},e.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var o=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var p=this.backoff.duration();this.reconnecting=!0;var y=setTimeout(function(){o.skipReconnect||(o.emitAll("reconnect_attempt",o.backoff.attempts),o.emitAll("reconnecting",o.backoff.attempts),o.skipReconnect||o.open(function(f){f?(o.reconnecting=!1,o.reconnect(),o.emitAll("reconnect_error",f.data)):o.onreconnect()}))},p);this.subs.push({destroy:function(){clearTimeout(y)}})}},e.prototype.onreconnect=function(){var o=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",o)}},function(l,t,n){l.exports=n(11),l.exports.parser=n(19)},function(l,t,n){function e(s,a){return this instanceof e?(a=a||{},s&&typeof s=="object"&&(a=s,s=null),s?(s=b(s),a.hostname=s.host,a.secure=s.protocol==="https"||s.protocol==="wss",a.port=s.port,s.query&&(a.query=s.query)):a.host&&(a.hostname=b(a.host).host),this.secure=a.secure!=null?a.secure:typeof location<"u"&&location.protocol==="https:",a.hostname&&!a.port&&(a.port=this.secure?"443":"80"),this.agent=a.agent||!1,this.hostname=a.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=a.port||(typeof location<"u"&&location.port?location.port:this.secure?443:80),this.query=a.query||{},typeof this.query=="string"&&(this.query=u.decode(this.query)),this.upgrade=a.upgrade!==!1,this.path=(a.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!a.forceJSONP,this.jsonp=a.jsonp!==!1,this.forceBase64=!!a.forceBase64,this.enablesXDR=!!a.enablesXDR,this.withCredentials=a.withCredentials!==!1,this.timestampParam=a.timestampParam||"t",this.timestampRequests=a.timestampRequests,this.transports=a.transports||["polling","websocket"],this.transportOptions=a.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=a.policyPort||843,this.rememberUpgrade=a.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=a.onlyBinaryUpgrades,this.perMessageDeflate=a.perMessageDeflate!==!1&&(a.perMessageDeflate||{}),this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=a.pfx||null,this.key=a.key||null,this.passphrase=a.passphrase||null,this.cert=a.cert||null,this.ca=a.ca||null,this.ciphers=a.ciphers||null,this.rejectUnauthorized=a.rejectUnauthorized===void 0||a.rejectUnauthorized,this.forceNode=!!a.forceNode,this.isReactNative=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",(typeof self>"u"||this.isReactNative)&&(a.extraHeaders&&Object.keys(a.extraHeaders).length>0&&(this.extraHeaders=a.extraHeaders),a.localAddress&&(this.localAddress=a.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,void this.open()):new e(s,a)}function c(s){var a={};for(var r in s)s.hasOwnProperty(r)&&(a[r]=s[r]);return a}var i=n(12),h=n(5),d=(n(3)("engine.io-client:socket"),n(33)),m=n(19),b=n(2),u=n(27);l.exports=e,e.priorWebsocketSuccess=!1,h(e.prototype),e.protocol=m.protocol,e.Socket=e,e.Transport=n(18),e.transports=n(12),e.parser=n(19),e.prototype.createTransport=function(s){var a=c(this.query);a.EIO=m.protocol,a.transport=s;var r=this.transportOptions[s]||{};this.id&&(a.sid=this.id);var o=new i[s]({query:a,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,withCredentials:r.withCredentials||this.withCredentials,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0,isReactNative:this.isReactNative});return o},e.prototype.open=function(){var s;if(this.rememberUpgrade&&e.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)s="websocket";else{if(this.transports.length===0){var a=this;return void setTimeout(function(){a.emit("error","No transports available")},0)}s=this.transports[0]}this.readyState="opening";try{s=this.createTransport(s)}catch{return this.transports.shift(),void this.open()}s.open(),this.setTransport(s)},e.prototype.setTransport=function(s){var a=this;this.transport&&this.transport.removeAllListeners(),this.transport=s,s.on("drain",function(){a.onDrain()}).on("packet",function(r){a.onPacket(r)}).on("error",function(r){a.onError(r)}).on("close",function(){a.onClose("transport close")})},e.prototype.probe=function(s){function a(){if(S.onlyBinaryUpgrades){var g=!this.supportsBinary&&S.transport.supportsBinary;k=k||g}k||(w.send([{type:"ping",data:"probe"}]),w.once("packet",function(x){if(!k)if(x.type==="pong"&&x.data==="probe"){if(S.upgrading=!0,S.emit("upgrading",w),!w)return;e.priorWebsocketSuccess=w.name==="websocket",S.transport.pause(function(){k||S.readyState!=="closed"&&(v(),S.setTransport(w),w.send([{type:"upgrade"}]),S.emit("upgrade",w),w=null,S.upgrading=!1,S.flush())})}else{var E=new Error("probe error");E.transport=w.name,S.emit("upgradeError",E)}}))}function r(){k||(k=!0,v(),w.close(),w=null)}function o(g){var x=new Error("probe error: "+g);x.transport=w.name,r(),S.emit("upgradeError",x)}function p(){o("transport closed")}function y(){o("socket closed")}function f(g){w&&g.name!==w.name&&r()}function v(){w.removeListener("open",a),w.removeListener("error",o),w.removeListener("close",p),S.removeListener("close",y),S.removeListener("upgrading",f)}var w=this.createTransport(s,{probe:1}),k=!1,S=this;e.priorWebsocketSuccess=!1,w.once("open",a),w.once("error",o),w.once("close",p),this.once("close",y),this.once("upgrading",f),w.open()},e.prototype.onOpen=function(){if(this.readyState="open",e.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause)for(var s=0,a=this.upgrades.length;s<a;s++)this.probe(this.upgrades[s])},e.prototype.onPacket=function(s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emit("packet",s),this.emit("heartbeat"),s.type){case"open":this.onHandshake(JSON.parse(s.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var a=new Error("server error");a.code=s.data,this.onError(a);break;case"message":this.emit("data",s.data),this.emit("message",s.data)}},e.prototype.onHandshake=function(s){this.emit("handshake",s),this.id=s.sid,this.transport.query.sid=s.sid,this.upgrades=this.filterUpgrades(s.upgrades),this.pingInterval=s.pingInterval,this.pingTimeout=s.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},e.prototype.onHeartbeat=function(s){clearTimeout(this.pingTimeoutTimer);var a=this;a.pingTimeoutTimer=setTimeout(function(){a.readyState!=="closed"&&a.onClose("ping timeout")},s||a.pingInterval+a.pingTimeout)},e.prototype.setPing=function(){var s=this;clearTimeout(s.pingIntervalTimer),s.pingIntervalTimer=setTimeout(function(){s.ping(),s.onHeartbeat(s.pingTimeout)},s.pingInterval)},e.prototype.ping=function(){var s=this;this.sendPacket("ping",function(){s.emit("ping")})},e.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()},e.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},e.prototype.write=e.prototype.send=function(s,a,r){return this.sendPacket("message",s,a,r),this},e.prototype.sendPacket=function(s,a,r,o){if(typeof a=="function"&&(o=a,a=void 0),typeof r=="function"&&(o=r,r=null),this.readyState!=="closing"&&this.readyState!=="closed"){r=r||{},r.compress=r.compress!==!1;var p={type:s,data:a,options:r};this.emit("packetCreate",p),this.writeBuffer.push(p),o&&this.once("flush",o),this.flush()}},e.prototype.close=function(){function s(){o.onClose("forced close"),o.transport.close()}function a(){o.removeListener("upgrade",a),o.removeListener("upgradeError",a),s()}function r(){o.once("upgrade",a),o.once("upgradeError",a)}if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var o=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():s()}):this.upgrading?r():s()}return this},e.prototype.onError=function(s){e.priorWebsocketSuccess=!1,this.emit("error",s),this.onClose("transport error",s)},e.prototype.onClose=function(s,a){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",s,a),r.writeBuffer=[],r.prevBufferLen=0}},e.prototype.filterUpgrades=function(s){for(var a=[],r=0,o=s.length;r<o;r++)~d(this.transports,s[r])&&a.push(s[r]);return a}},function(l,t,n){function e(m){var b,u=!1,s=!1,a=m.jsonp!==!1;if(typeof location<"u"){var r=location.protocol==="https:",o=location.port;o||(o=r?443:80),u=m.hostname!==location.hostname||o!==m.port,s=m.secure!==r}if(m.xdomain=u,m.xscheme=s,b=new c(m),"open"in b&&!m.forceJSONP)return new i(m);if(!a)throw new Error("JSONP disabled");return new h(m)}var c=n(13),i=n(16),h=n(30),d=n(31);t.polling=e,t.websocket=d},function(l,t,n){var e=n(14),c=n(15);l.exports=function(i){var h=i.xdomain,d=i.xscheme,m=i.enablesXDR;try{if(typeof XMLHttpRequest<"u"&&(!h||e))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest<"u"&&!d&&m)return new XDomainRequest}catch{}if(!h)try{return new c[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}},function(l,t){try{l.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{l.exports=!1}},function(l,t){l.exports=function(){return typeof self<"u"?self:typeof window<"u"?window:Function("return this")()}()},function(l,t,n){function e(){}function c(r){if(m.call(this,r),this.requestTimeout=r.requestTimeout,this.extraHeaders=r.extraHeaders,typeof location<"u"){var o=location.protocol==="https:",p=location.port;p||(p=o?443:80),this.xd=typeof location<"u"&&r.hostname!==location.hostname||p!==r.port,this.xs=r.secure!==o}}function i(r){this.method=r.method||"GET",this.uri=r.uri,this.xd=!!r.xd,this.xs=!!r.xs,this.async=r.async!==!1,this.data=r.data!==void 0?r.data:null,this.agent=r.agent,this.isBinary=r.isBinary,this.supportsBinary=r.supportsBinary,this.enablesXDR=r.enablesXDR,this.withCredentials=r.withCredentials,this.requestTimeout=r.requestTimeout,this.pfx=r.pfx,this.key=r.key,this.passphrase=r.passphrase,this.cert=r.cert,this.ca=r.ca,this.ciphers=r.ciphers,this.rejectUnauthorized=r.rejectUnauthorized,this.extraHeaders=r.extraHeaders,this.create()}function h(){for(var r in i.requests)i.requests.hasOwnProperty(r)&&i.requests[r].abort()}var d=n(13),m=n(17),b=n(5),u=n(28),s=(n(3)("engine.io-client:polling-xhr"),n(15));if(l.exports=c,l.exports.Request=i,u(c,m),c.prototype.supportsBinary=!0,c.prototype.request=function(r){return r=r||{},r.uri=this.uri(),r.xd=this.xd,r.xs=this.xs,r.agent=this.agent||!1,r.supportsBinary=this.supportsBinary,r.enablesXDR=this.enablesXDR,r.withCredentials=this.withCredentials,r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,r.requestTimeout=this.requestTimeout,r.extraHeaders=this.extraHeaders,new i(r)},c.prototype.doWrite=function(r,o){var p=typeof r!="string"&&r!==void 0,y=this.request({method:"POST",data:r,isBinary:p}),f=this;y.on("success",o),y.on("error",function(v){f.onError("xhr post error",v)}),this.sendXhr=y},c.prototype.doPoll=function(){var r=this.request(),o=this;r.on("data",function(p){o.onData(p)}),r.on("error",function(p){o.onError("xhr poll error",p)}),this.pollXhr=r},b(i.prototype),i.prototype.create=function(){var r={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized;var o=this.xhr=new d(r),p=this;try{o.open(this.method,this.uri,this.async);try{if(this.extraHeaders){o.setDisableHeaderCheck&&o.setDisableHeaderCheck(!0);for(var y in this.extraHeaders)this.extraHeaders.hasOwnProperty(y)&&o.setRequestHeader(y,this.extraHeaders[y])}}catch{}if(this.method==="POST")try{this.isBinary?o.setRequestHeader("Content-type","application/octet-stream"):o.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{o.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in o&&(o.withCredentials=this.withCredentials),this.requestTimeout&&(o.timeout=this.requestTimeout),this.hasXDR()?(o.onload=function(){p.onLoad()},o.onerror=function(){p.onError(o.responseText)}):o.onreadystatechange=function(){if(o.readyState===2)try{var f=o.getResponseHeader("Content-Type");(p.supportsBinary&&f==="application/octet-stream"||f==="application/octet-stream; charset=UTF-8")&&(o.responseType="arraybuffer")}catch{}o.readyState===4&&(o.status===200||o.status===1223?p.onLoad():setTimeout(function(){p.onError(typeof o.status=="number"?o.status:0)},0))},o.send(this.data)}catch(f){return void setTimeout(function(){p.onError(f)},0)}typeof document<"u"&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(r){this.emit("data",r),this.onSuccess()},i.prototype.onError=function(r){this.emit("error",r),this.cleanup(!0)},i.prototype.cleanup=function(r){if(typeof this.xhr<"u"&&this.xhr!==null){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=e:this.xhr.onreadystatechange=e,r)try{this.xhr.abort()}catch{}typeof document<"u"&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var r;try{var o;try{o=this.xhr.getResponseHeader("Content-Type")}catch{}r=o==="application/octet-stream"||o==="application/octet-stream; charset=UTF-8"?this.xhr.response||this.xhr.responseText:this.xhr.responseText}catch(p){this.onError(p)}r!=null&&this.onData(r)},i.prototype.hasXDR=function(){return typeof XDomainRequest<"u"&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},i.requestsCount=0,i.requests={},typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",h);else if(typeof addEventListener=="function"){var a="onpagehide"in s?"pagehide":"unload";addEventListener(a,h,!1)}}},function(l,t,n){function e(u){var s=u&&u.forceBase64;b&&!s||(this.supportsBinary=!1),c.call(this,u)}var c=n(18),i=n(27),h=n(19),d=n(28),m=n(29);n(3)("engine.io-client:polling"),l.exports=e;var b=function(){var u=n(13),s=new u({xdomain:!1});return s.responseType!=null}();d(e,c),e.prototype.name="polling",e.prototype.doOpen=function(){this.poll()},e.prototype.pause=function(u){function s(){a.readyState="paused",u()}var a=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||s()})),this.writable||(r++,this.once("drain",function(){--r||s()}))}else s()},e.prototype.poll=function(){this.polling=!0,this.doPoll(),this.emit("poll")},e.prototype.onData=function(u){var s=this,a=function(r,o,p){return s.readyState==="opening"&&r.type==="open"&&s.onOpen(),r.type==="close"?(s.onClose(),!1):void s.onPacket(r)};h.decodePayload(u,this.socket.binaryType,a),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"&&this.poll())},e.prototype.doClose=function(){function u(){s.write([{type:"close"}])}var s=this;this.readyState==="open"?u():this.once("open",u)},e.prototype.write=function(u){var s=this;this.writable=!1;var a=function(){s.writable=!0,s.emit("drain")};h.encodePayload(u,this.supportsBinary,function(r){s.doWrite(r,a)})},e.prototype.uri=function(){var u=this.query||{},s=this.secure?"https":"http",a="";this.timestampRequests!==!1&&(u[this.timestampParam]=m()),this.supportsBinary||u.sid||(u.b64=1),u=i.encode(u),this.port&&(s==="https"&&Number(this.port)!==443||s==="http"&&Number(this.port)!==80)&&(a=":"+this.port),u.length&&(u="?"+u);var r=this.hostname.indexOf(":")!==-1;return s+"://"+(r?"["+this.hostname+"]":this.hostname)+a+this.path+u}},function(l,t,n){function e(h){this.path=h.path,this.hostname=h.hostname,this.port=h.port,this.secure=h.secure,this.query=h.query,this.timestampParam=h.timestampParam,this.timestampRequests=h.timestampRequests,this.readyState="",this.agent=h.agent||!1,this.socket=h.socket,this.enablesXDR=h.enablesXDR,this.withCredentials=h.withCredentials,this.pfx=h.pfx,this.key=h.key,this.passphrase=h.passphrase,this.cert=h.cert,this.ca=h.ca,this.ciphers=h.ciphers,this.rejectUnauthorized=h.rejectUnauthorized,this.forceNode=h.forceNode,this.isReactNative=h.isReactNative,this.extraHeaders=h.extraHeaders,this.localAddress=h.localAddress}var c=n(19),i=n(5);l.exports=e,i(e.prototype),e.prototype.onError=function(h,d){var m=new Error(h);return m.type="TransportError",m.description=d,this.emit("error",m),this},e.prototype.open=function(){return this.readyState!=="closed"&&this.readyState!==""||(this.readyState="opening",this.doOpen()),this},e.prototype.close=function(){return this.readyState!=="opening"&&this.readyState!=="open"||(this.doClose(),this.onClose()),this},e.prototype.send=function(h){if(this.readyState!=="open")throw new Error("Transport not open");this.write(h)},e.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},e.prototype.onData=function(h){var d=c.decodePacket(h,this.socket.binaryType);this.onPacket(d)},e.prototype.onPacket=function(h){this.emit("packet",h)},e.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(l,t,n){function e(g,x){var E="b"+t.packets[g.type]+g.data.data;return x(E)}function c(g,x,E){if(!x)return t.encodeBase64Packet(g,E);var A=g.data,C=new Uint8Array(A),R=new Uint8Array(1+A.byteLength);R[0]=v[g.type];for(var M=0;M<C.length;M++)R[M+1]=C[M];return E(R.buffer)}function i(g,x,E){if(!x)return t.encodeBase64Packet(g,E);var A=new FileReader;return A.onload=function(){t.encodePacket({type:g.type,data:A.result},x,!0,E)},A.readAsArrayBuffer(g.data)}function h(g,x,E){if(!x)return t.encodeBase64Packet(g,E);if(f)return i(g,x,E);var A=new Uint8Array(1);A[0]=v[g.type];var C=new S([A.buffer,g.data]);return E(C)}function d(g){try{g=o.decode(g,{strict:!1})}catch{return!1}return g}function m(g,x,E){for(var A=new Array(g.length),C=r(g.length,E),R=function(B,T,I){x(T,function(P,O){A[B]=O,I(P,A)})},M=0;M<g.length;M++)R(M,g[M],C)}var b,u=n(20),s=n(21),a=n(22),r=n(23),o=n(24);typeof ArrayBuffer<"u"&&(b=n(25));var p=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),y=typeof navigator<"u"&&/PhantomJS/i.test(navigator.userAgent),f=p||y;t.protocol=3;var v=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},w=u(v),k={type:"error",data:"parser error"},S=n(26);t.encodePacket=function(g,x,E,A){typeof x=="function"&&(A=x,x=!1),typeof E=="function"&&(A=E,E=null);var C=g.data===void 0?void 0:g.data.buffer||g.data;if(typeof ArrayBuffer<"u"&&C instanceof ArrayBuffer)return c(g,x,A);if(typeof S<"u"&&C instanceof S)return h(g,x,A);if(C&&C.base64)return e(g,A);var R=v[g.type];return g.data!==void 0&&(R+=E?o.encode(String(g.data),{strict:!1}):String(g.data)),A(""+R)},t.encodeBase64Packet=function(g,x){var E="b"+t.packets[g.type];if(typeof S<"u"&&g.data instanceof S){var A=new FileReader;return A.onload=function(){var T=A.result.split(",")[1];x(E+T)},A.readAsDataURL(g.data)}var C;try{C=String.fromCharCode.apply(null,new Uint8Array(g.data))}catch{for(var R=new Uint8Array(g.data),M=new Array(R.length),B=0;B<R.length;B++)M[B]=R[B];C=String.fromCharCode.apply(null,M)}return E+=btoa(C),x(E)},t.decodePacket=function(g,x,E){if(g===void 0)return k;if(typeof g=="string"){if(g.charAt(0)==="b")return t.decodeBase64Packet(g.substr(1),x);if(E&&(g=d(g),g===!1))return k;var C=g.charAt(0);return Number(C)==C&&w[C]?g.length>1?{type:w[C],data:g.substring(1)}:{type:w[C]}:k}var A=new Uint8Array(g),C=A[0],R=a(g,1);return S&&x==="blob"&&(R=new S([R])),{type:w[C],data:R}},t.decodeBase64Packet=function(g,x){var E=w[g.charAt(0)];if(!b)return{type:E,data:{base64:!0,data:g.substr(1)}};var A=b.decode(g.substr(1));return x==="blob"&&S&&(A=new S([A])),{type:E,data:A}},t.encodePayload=function(g,x,E){function A(M){return M.length+":"+M}function C(M,B){t.encodePacket(M,!!R&&x,!1,function(T){B(null,A(T))})}typeof x=="function"&&(E=x,x=null);var R=s(g);return x&&R?S&&!f?t.encodePayloadAsBlob(g,E):t.encodePayloadAsArrayBuffer(g,E):g.length?void m(g,C,function(M,B){return E(B.join(""))}):E("0:")},t.decodePayload=function(g,x,E){if(typeof g!="string")return t.decodePayloadAsBinary(g,x,E);typeof x=="function"&&(E=x,x=null);var A;if(g==="")return E(k,0,1);for(var C,R,M="",B=0,T=g.length;B<T;B++){var I=g.charAt(B);if(I===":"){if(M===""||M!=(C=Number(M))||(R=g.substr(B+1,C),M!=R.length))return E(k,0,1);if(R.length){if(A=t.decodePacket(R,x,!1),k.type===A.type&&k.data===A.data)return E(k,0,1);var P=E(A,B+C,T);if(P===!1)return}B+=C,M=""}else M+=I}return M!==""?E(k,0,1):void 0},t.encodePayloadAsArrayBuffer=function(g,x){function E(A,C){t.encodePacket(A,!0,!0,function(R){return C(null,R)})}return g.length?void m(g,E,function(A,C){var R=C.reduce(function(T,I){var P;return P=typeof I=="string"?I.length:I.byteLength,T+P.toString().length+P+2},0),M=new Uint8Array(R),B=0;return C.forEach(function(T){var I=typeof T=="string",P=T;if(I){for(var O=new Uint8Array(T.length),N=0;N<T.length;N++)O[N]=T.charCodeAt(N);P=O.buffer}I?M[B++]=0:M[B++]=1;for(var K=P.byteLength.toString(),N=0;N<K.length;N++)M[B++]=parseInt(K[N]);M[B++]=255;for(var O=new Uint8Array(P),N=0;N<O.length;N++)M[B++]=O[N]}),x(M.buffer)}):x(new ArrayBuffer(0))},t.encodePayloadAsBlob=function(g,x){function E(A,C){t.encodePacket(A,!0,!0,function(R){var M=new Uint8Array(1);if(M[0]=1,typeof R=="string"){for(var B=new Uint8Array(R.length),T=0;T<R.length;T++)B[T]=R.charCodeAt(T);R=B.buffer,M[0]=0}for(var I=R instanceof ArrayBuffer?R.byteLength:R.size,P=I.toString(),O=new Uint8Array(P.length+1),T=0;T<P.length;T++)O[T]=parseInt(P[T]);if(O[P.length]=255,S){var N=new S([M.buffer,O.buffer,R]);C(null,N)}})}m(g,E,function(A,C){return x(new S(C))})},t.decodePayloadAsBinary=function(g,x,E){typeof x=="function"&&(E=x,x=null);for(var A=g,C=[];A.byteLength>0;){for(var R=new Uint8Array(A),M=R[0]===0,B="",T=1;R[T]!==255;T++){if(B.length>310)return E(k,0,1);B+=R[T]}A=a(A,2+B.length),B=parseInt(B);var I=a(A,0,B);if(M)try{I=String.fromCharCode.apply(null,new Uint8Array(I))}catch{var P=new Uint8Array(I);I="";for(var T=0;T<P.length;T++)I+=String.fromCharCode(P[T])}C.push(I),A=a(A,B)}var O=C.length;C.forEach(function(N,K){E(t.decodePacket(N,x,!0),K,O)})}},function(l,t){l.exports=Object.keys||function(n){var e=[],c=Object.prototype.hasOwnProperty;for(var i in n)c.call(n,i)&&e.push(i);return e}},function(l,t,n){function e(m){if(!m||typeof m!="object")return!1;if(c(m)){for(var b=0,u=m.length;b<u;b++)if(e(m[b]))return!0;return!1}if(typeof Buffer=="function"&&Buffer.isBuffer&&Buffer.isBuffer(m)||typeof ArrayBuffer=="function"&&m instanceof ArrayBuffer||h&&m instanceof Blob||d&&m instanceof File)return!0;if(m.toJSON&&typeof m.toJSON=="function"&&arguments.length===1)return e(m.toJSON(),!0);for(var s in m)if(Object.prototype.hasOwnProperty.call(m,s)&&e(m[s]))return!0;return!1}var c=n(7),i=Object.prototype.toString,h=typeof Blob=="function"||typeof Blob<"u"&&i.call(Blob)==="[object BlobConstructor]",d=typeof File=="function"||typeof File<"u"&&i.call(File)==="[object FileConstructor]";l.exports=e},function(l,t){l.exports=function(n,e,c){var i=n.byteLength;if(e=e||0,c=c||i,n.slice)return n.slice(e,c);if(e<0&&(e+=i),c<0&&(c+=i),c>i&&(c=i),e>=i||e>=c||i===0)return new ArrayBuffer(0);for(var h=new Uint8Array(n),d=new Uint8Array(c-e),m=e,b=0;m<c;m++,b++)d[b]=h[m];return d.buffer}},function(l,t){function n(c,i,h){function d(b,u){if(d.count<=0)throw new Error("after called too many times");--d.count,b?(m=!0,i(b),i=h):d.count!==0||m||i(null,u)}var m=!1;return h=h||e,d.count=c,c===0?i():d}function e(){}l.exports=n},function(l,t){function n(p){for(var y,f,v=[],w=0,k=p.length;w<k;)y=p.charCodeAt(w++),y>=55296&&y<=56319&&w<k?(f=p.charCodeAt(w++),(64512&f)==56320?v.push(((1023&y)<<10)+(1023&f)+65536):(v.push(y),w--)):v.push(y);return v}function e(p){for(var y,f=p.length,v=-1,w="";++v<f;)y=p[v],y>65535&&(y-=65536,w+=o(y>>>10&1023|55296),y=56320|1023&y),w+=o(y);return w}function c(p,y){if(p>=55296&&p<=57343){if(y)throw Error("Lone surrogate U+"+p.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function i(p,y){return o(p>>y&63|128)}function h(p,y){if((4294967168&p)==0)return o(p);var f="";return(4294965248&p)==0?f=o(p>>6&31|192):(4294901760&p)==0?(c(p,y)||(p=65533),f=o(p>>12&15|224),f+=i(p,6)):(4292870144&p)==0&&(f=o(p>>18&7|240),f+=i(p,12),f+=i(p,6)),f+=o(63&p|128)}function d(p,y){y=y||{};for(var f,v=y.strict!==!1,w=n(p),k=w.length,S=-1,g="";++S<k;)f=w[S],g+=h(f,v);return g}function m(){if(r>=a)throw Error("Invalid byte index");var p=255&s[r];if(r++,(192&p)==128)return 63&p;throw Error("Invalid continuation byte")}function b(p){var y,f,v,w,k;if(r>a)throw Error("Invalid byte index");if(r==a)return!1;if(y=255&s[r],r++,(128&y)==0)return y;if((224&y)==192){if(f=m(),k=(31&y)<<6|f,k>=128)return k;throw Error("Invalid continuation byte")}if((240&y)==224){if(f=m(),v=m(),k=(15&y)<<12|f<<6|v,k>=2048)return c(k,p)?k:65533;throw Error("Invalid continuation byte")}if((248&y)==240&&(f=m(),v=m(),w=m(),k=(7&y)<<18|f<<12|v<<6|w,k>=65536&&k<=1114111))return k;throw Error("Invalid UTF-8 detected")}function u(p,y){y=y||{};var f=y.strict!==!1;s=n(p),a=s.length,r=0;for(var v,w=[];(v=b(f))!==!1;)w.push(v);return e(w)}var s,a,r,o=String.fromCharCode;l.exports={version:"2.1.2",encode:d,decode:u}},function(l,t){(function(n){"use strict";t.encode=function(e){var c,i=new Uint8Array(e),h=i.length,d="";for(c=0;c<h;c+=3)d+=n[i[c]>>2],d+=n[(3&i[c])<<4|i[c+1]>>4],d+=n[(15&i[c+1])<<2|i[c+2]>>6],d+=n[63&i[c+2]];return h%3===2?d=d.substring(0,d.length-1)+"=":h%3===1&&(d=d.substring(0,d.length-2)+"=="),d},t.decode=function(e){var c,i,h,d,m,b=.75*e.length,u=e.length,s=0;e[e.length-1]==="="&&(b--,e[e.length-2]==="="&&b--);var a=new ArrayBuffer(b),r=new Uint8Array(a);for(c=0;c<u;c+=4)i=n.indexOf(e[c]),h=n.indexOf(e[c+1]),d=n.indexOf(e[c+2]),m=n.indexOf(e[c+3]),r[s++]=i<<2|h>>4,r[s++]=(15&h)<<4|d>>2,r[s++]=(3&d)<<6|63&m;return a}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(l,t){function n(b){return b.map(function(u){if(u.buffer instanceof ArrayBuffer){var s=u.buffer;if(u.byteLength!==s.byteLength){var a=new Uint8Array(u.byteLength);a.set(new Uint8Array(s,u.byteOffset,u.byteLength)),s=a.buffer}return s}return u})}function e(b,u){u=u||{};var s=new i;return n(b).forEach(function(a){s.append(a)}),u.type?s.getBlob(u.type):s.getBlob()}function c(b,u){return new Blob(n(b),u||{})}var i=typeof i<"u"?i:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"&&MozBlobBuilder,h=function(){try{var b=new Blob(["hi"]);return b.size===2}catch{return!1}}(),d=h&&function(){try{var b=new Blob([new Uint8Array([1,2])]);return b.size===2}catch{return!1}}(),m=i&&i.prototype.append&&i.prototype.getBlob;typeof Blob<"u"&&(e.prototype=Blob.prototype,c.prototype=Blob.prototype),l.exports=function(){return h?d?Blob:c:m?e:void 0}()},function(l,t){t.encode=function(n){var e="";for(var c in n)n.hasOwnProperty(c)&&(e.length&&(e+="&"),e+=encodeURIComponent(c)+"="+encodeURIComponent(n[c]));return e},t.decode=function(n){for(var e={},c=n.split("&"),i=0,h=c.length;i<h;i++){var d=c[i].split("=");e[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return e}},function(l,t){l.exports=function(n,e){var c=function(){};c.prototype=e.prototype,n.prototype=new c,n.prototype.constructor=n}},function(l,t){"use strict";function n(s){var a="";do a=h[s%d]+a,s=Math.floor(s/d);while(s>0);return a}function e(s){var a=0;for(u=0;u<s.length;u++)a=a*d+m[s.charAt(u)];return a}function c(){var s=n(+new Date);return s!==i?(b=0,i=s):s+"."+n(b++)}for(var i,h="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),d=64,m={},b=0,u=0;u<d;u++)m[h[u]]=u;c.encode=n,c.decode=e,l.exports=c},function(l,t,n){function e(){}function c(s){i.call(this,s),this.query=this.query||{},m||(m=d.___eio=d.___eio||[]),this.index=m.length;var a=this;m.push(function(r){a.onData(r)}),this.query.j=this.index,typeof addEventListener=="function"&&addEventListener("beforeunload",function(){a.script&&(a.script.onerror=e)},!1)}var i=n(17),h=n(28),d=n(15);l.exports=c;var m,b=/\n/g,u=/\\n/g;h(c,i),c.prototype.supportsBinary=!1,c.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},c.prototype.doPoll=function(){var s=this,a=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),a.async=!0,a.src=this.uri(),a.onerror=function(p){s.onError("jsonp poll error",p)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(a,r):(document.head||document.body).appendChild(a),this.script=a;var o=typeof navigator<"u"&&/gecko/i.test(navigator.userAgent);o&&setTimeout(function(){var p=document.createElement("iframe");document.body.appendChild(p),document.body.removeChild(p)},100)},c.prototype.doWrite=function(s,a){function r(){o(),a()}function o(){if(p.iframe)try{p.form.removeChild(p.iframe)}catch(S){p.onError("jsonp polling iframe removal error",S)}try{var k='<iframe src="javascript:0" name="'+p.iframeId+'">';y=document.createElement(k)}catch{y=document.createElement("iframe"),y.name=p.iframeId,y.src="javascript:0"}y.id=p.iframeId,p.form.appendChild(y),p.iframe=y}var p=this;if(!this.form){var y,f=document.createElement("form"),v=document.createElement("textarea"),w=this.iframeId="eio_iframe_"+this.index;f.className="socketio",f.style.position="absolute",f.style.top="-1000px",f.style.left="-1000px",f.target=w,f.method="POST",f.setAttribute("accept-charset","utf-8"),v.name="d",f.appendChild(v),document.body.appendChild(f),this.form=f,this.area=v}this.form.action=this.uri(),o(),s=s.replace(u,`\\
`),this.area.value=s.replace(b,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){p.iframe.readyState==="complete"&&r()}:this.iframe.onload=r}},function(l,t,n){function e(a){var r=a&&a.forceBase64;r&&(this.supportsBinary=!1),this.perMessageDeflate=a.perMessageDeflate,this.usingBrowserWebSocket=c&&!a.forceNode,this.protocols=a.protocols,this.usingBrowserWebSocket||(s=i),h.call(this,a)}var c,i,h=n(18),d=n(19),m=n(27),b=n(28),u=n(29);if(n(3)("engine.io-client:websocket"),typeof WebSocket<"u"?c=WebSocket:typeof self<"u"&&(c=self.WebSocket||self.MozWebSocket),typeof window>"u")try{i=n(32)}catch{}var s=c||i;l.exports=e,b(e,h),e.prototype.name="websocket",e.prototype.supportsBinary=!0,e.prototype.doOpen=function(){if(this.check()){var a=this.uri(),r=this.protocols,o={};this.isReactNative||(o.agent=this.agent,o.perMessageDeflate=this.perMessageDeflate,o.pfx=this.pfx,o.key=this.key,o.passphrase=this.passphrase,o.cert=this.cert,o.ca=this.ca,o.ciphers=this.ciphers,o.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(o.headers=this.extraHeaders),this.localAddress&&(o.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?r?new s(a,r):new s(a):new s(a,r,o)}catch(p){return this.emit("error",p)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},e.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()},this.ws.onclose=function(){a.onClose()},this.ws.onmessage=function(r){a.onData(r.data)},this.ws.onerror=function(r){a.onError("websocket error",r)}},e.prototype.write=function(a){function r(){o.emit("flush"),setTimeout(function(){o.writable=!0,o.emit("drain")},0)}var o=this;this.writable=!1;for(var p=a.length,y=0,f=p;y<f;y++)(function(v){d.encodePacket(v,o.supportsBinary,function(w){if(!o.usingBrowserWebSocket){var k={};if(v.options&&(k.compress=v.options.compress),o.perMessageDeflate){var S=typeof w=="string"?Buffer.byteLength(w):w.length;S<o.perMessageDeflate.threshold&&(k.compress=!1)}}try{o.usingBrowserWebSocket?o.ws.send(w):o.ws.send(w,k)}catch{}--p||r()})})(a[y])},e.prototype.onClose=function(){h.prototype.onClose.call(this)},e.prototype.doClose=function(){typeof this.ws<"u"&&this.ws.close()},e.prototype.uri=function(){var a=this.query||{},r=this.secure?"wss":"ws",o="";this.port&&(r==="wss"&&Number(this.port)!==443||r==="ws"&&Number(this.port)!==80)&&(o=":"+this.port),this.timestampRequests&&(a[this.timestampParam]=u()),this.supportsBinary||(a.b64=1),a=m.encode(a),a.length&&(a="?"+a);var p=this.hostname.indexOf(":")!==-1;return r+"://"+(p?"["+this.hostname+"]":this.hostname)+o+this.path+a},e.prototype.check=function(){return!(!s||"__initialize"in s&&this.name===e.prototype.name)}},function(l,t){},function(l,t){var n=[].indexOf;l.exports=function(e,c){if(n)return e.indexOf(c);for(var i=0;i<e.length;++i)if(e[i]===c)return i;return-1}},function(l,t,n){"use strict";function e(o,p,y){this.io=o,this.nsp=p,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},y&&y.query&&(this.query=y.query),this.io.autoConnect&&this.open()}var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},i=n(4),h=n(5),d=n(35),m=n(36),b=n(37),u=(n(3)("socket.io-client:socket"),n(27)),s=n(21);l.exports=t=e;var a={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},r=h.prototype.emit;h(e.prototype),e.prototype.subEvents=function(){if(!this.subs){var o=this.io;this.subs=[m(o,"open",b(this,"onopen")),m(o,"packet",b(this,"onpacket")),m(o,"close",b(this,"onclose"))]}},e.prototype.open=e.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.reconnecting||this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting"),this)},e.prototype.send=function(){var o=d(arguments);return o.unshift("message"),this.emit.apply(this,o),this},e.prototype.emit=function(o){if(a.hasOwnProperty(o))return r.apply(this,arguments),this;var p=d(arguments),y={type:(this.flags.binary!==void 0?this.flags.binary:s(p))?i.BINARY_EVENT:i.EVENT,data:p};return y.options={},y.options.compress=!this.flags||this.flags.compress!==!1,typeof p[p.length-1]=="function"&&(this.acks[this.ids]=p.pop(),y.id=this.ids++),this.connected?this.packet(y):this.sendBuffer.push(y),this.flags={},this},e.prototype.packet=function(o){o.nsp=this.nsp,this.io.packet(o)},e.prototype.onopen=function(){if(this.nsp!=="/")if(this.query){var o=c(this.query)==="object"?u.encode(this.query):this.query;this.packet({type:i.CONNECT,query:o})}else this.packet({type:i.CONNECT})},e.prototype.onclose=function(o){this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",o)},e.prototype.onpacket=function(o){var p=o.nsp===this.nsp,y=o.type===i.ERROR&&o.nsp==="/";if(p||y)switch(o.type){case i.CONNECT:this.onconnect();break;case i.EVENT:this.onevent(o);break;case i.BINARY_EVENT:this.onevent(o);break;case i.ACK:this.onack(o);break;case i.BINARY_ACK:this.onack(o);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",o.data)}},e.prototype.onevent=function(o){var p=o.data||[];o.id!=null&&p.push(this.ack(o.id)),this.connected?r.apply(this,p):this.receiveBuffer.push(p)},e.prototype.ack=function(o){var p=this,y=!1;return function(){if(!y){y=!0;var f=d(arguments);p.packet({type:s(f)?i.BINARY_ACK:i.ACK,id:o,data:f})}}},e.prototype.onack=function(o){var p=this.acks[o.id];typeof p=="function"&&(p.apply(this,o.data),delete this.acks[o.id])},e.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},e.prototype.emitBuffered=function(){var o;for(o=0;o<this.receiveBuffer.length;o++)r.apply(this,this.receiveBuffer[o]);for(this.receiveBuffer=[],o=0;o<this.sendBuffer.length;o++)this.packet(this.sendBuffer[o]);this.sendBuffer=[]},e.prototype.ondisconnect=function(){this.destroy(),this.onclose("io server disconnect")},e.prototype.destroy=function(){if(this.subs){for(var o=0;o<this.subs.length;o++)this.subs[o].destroy();this.subs=null}this.io.destroy(this)},e.prototype.close=e.prototype.disconnect=function(){return this.connected&&this.packet({type:i.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},e.prototype.compress=function(o){return this.flags.compress=o,this},e.prototype.binary=function(o){return this.flags.binary=o,this}},function(l,t){function n(e,c){var i=[];c=c||0;for(var h=c||0;h<e.length;h++)i[h-c]=e[h];return i}l.exports=n},function(l,t){"use strict";function n(e,c,i){return e.on(c,i),{destroy:function(){e.removeListener(c,i)}}}l.exports=n},function(l,t){var n=[].slice;l.exports=function(e,c){if(typeof c=="string"&&(c=e[c]),typeof c!="function")throw new Error("bind() requires a function");var i=n.call(arguments,2);return function(){return c.apply(e,i.concat(n.call(arguments)))}}},function(l,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}l.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var c=Math.random(),i=Math.floor(c*this.jitter*e);e=(1&Math.floor(10*c))==0?e-i:e+i}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}}])})});function $(l){return l&&l.Math===Math&&l}var U=$(typeof globalThis=="object"&&globalThis)||$(typeof window=="object"&&window)||$(typeof self=="object"&&self)||$(typeof global=="object"&&global)||function(){return this}()||Function("return this")(),he=U.top||U,G=U.parent||U,ue=U.opener||null;var L=class{value;handler=null;constructor(t){this.value=t}set(t){Object.is(this.value,t)||(this.value=t,this.apply())}get(){return this.value}on(t,n){let e=this.handler;for(;e!==null;)e.fn===t&&e.context===n&&console.warn("ReactiveValue#on: duplicate fn & context pair"),e=e.handler;this.handler={fn:t,context:n,handler:this.handler}}link(t,n){this.on(t,n),t.call(n,this.value)}off(t,n){let e=this.handler,c=this;for(;e!==null;){if(e.fn===t&&e.context===n){e.fn=function(){},c.handler=e.handler;return}c=e,e=e.handler}console.warn("ReactiveValue#off: fn & context pair not found, nothing was removed")}apply(){let t=this.handler;for(;t!==null;)t.fn.call(t.context,this.value),t=t.handler}};function le(l,t){let n=[...new Set(Array.isArray(t)?t:[])];return n.length!==l.length||n.some(c=>!l.includes(c))?n:l}var q=class extends L{constructor(t){super(le([],t))}set(t){super.set(le(this.value,t))}};var W=class extends q{endpointLists=new Set;constructor(){super([])}set(){super.set([].concat(...[...this.endpointLists].map(t=>t.value)))}add(t){this.endpointLists.has(t)||(this.endpointLists.add(t),t.on(this.set,this),this.set())}remove(t){this.endpointLists.has(t)&&(this.endpointLists.delete(t),t.off(this.set,this),this.set())}};function z(l){function t(e){return Math.round(e).toString(36)}let n=t(10+25*Math.random());for(l||(l=16);n.length<l;)n+=t(Date.now()*Math.random());return n.substr(0,l)}function V(l,t){return l.push(t),()=>{let n=l.indexOf(t);n!==-1&&l.splice(n,1)}}var ee="[rempl][event-transport] ",te=[],j=class{static get(t,n,e){return e||(e=U),te.find(i=>i.name===t&&i.connectTo===n&&i.realm===e)||new j(t,n,e)}name;connectTo;realm;inputChannelId;connections=new Map;connected=new L(!1);endpointGetUI=new Map;ownEndpoints=new q;remoteEndpoints=new W;initCallbacks=[];dataCallbacks=[];sendCallbacks=new Map;inited=!1;constructor(t,n,e){if(te.length===0&&typeof addEventListener=="function"&&addEventListener("message",c=>{for(let i of te)i._onMessage(c)},!1),te.push(this),this.name=t,this.connectTo=n,this.inputChannelId=`${t}/${z()}`,this.realm=e||U,this.ownEndpoints.on(c=>{this.connected.value&&this.send({type:"endpoints",data:[c]})}),typeof this.realm.postMessage!="function"||typeof addEventListener!="function"){console.warn(ee+"Event (postMessage) transport isn't supported");return}this._handshake(!1)}_handshake(t){this._send(`${this.connectTo}:connect`,{type:"handshake",initiator:this.name,inited:t,endpoints:this.ownEndpoints.value})}_onMessage(t){if(t.source!==this.realm||t.target!==U)return;let n=t.data||{},e=`${this.name}:connect`;switch(n.to){case e:n.payload?.initiator===this.connectTo&&this._onConnect(n.from,n.payload);break;case this.inputChannelId:this.connections.has(n.from)?this._onData(n.from,n.payload):console.warn(ee+"unknown incoming connection",n.from);break}}_onConnect(t,n){if(n.inited||this._handshake(!0),!this.connections.has(t)){let e=new q(n.endpoints);this.remoteEndpoints.add(e),this.connections.set(t,{ttl:Date.now(),endpoints:e}),this._send(t,{type:"connect",endpoints:this.ownEndpoints.value})}this.inited=!0}_onData(t,n){switch(n.type){case"connect":{this.connections.get(t)?.endpoints.set(n.endpoints),this.connected.set(!0),this.initCallbacks.splice(0).forEach(e=>this.onInit(...e));break}case"endpoints":{this.connections.get(t)?.endpoints.set(n.data[0]);break}case"disconnect":{this.connections.get(t)?.endpoints.set([]),this.connected.set(!1);break}case"callback":{if(n.callback){let e=this.sendCallbacks.get(n.callback);typeof e=="function"&&(e(...n.data),this.sendCallbacks.delete(n.callback))}break}case"data":{let e=n.data,c=n.callback;c&&(e=e.concat(this._wrapCallback(t,c)));for(let{endpoint:i,fn:h}of this.dataCallbacks)i===n.endpoint&&h(...e);break}case"getRemoteUI":{if(!n.endpoint)return;let e=this.endpointGetUI.get(n.endpoint);if(typeof e!="function")console.warn(ee+"receive unknown endpoint for getRemoteUI(): "+n.endpoint),n.callback&&this._wrapCallback(t,n.callback)("Wrong endpoint \u2013 "+n.endpoint);else if(n.callback){let c=this._wrapCallback(t,n.callback);e(n.data[0]||{}).catch(i=>({error:String(i?.message)})).then(i=>{"error"in i?c(i.error):c(null,i.type,i.value)})}break}default:console.warn(ee+"Unknown message type `"+n.type+"` for `"+this.name+"`",n)}}_wrapCallback(t,n){return(...e)=>this._send(t,{type:"callback",callback:n,data:e})}_send(t,n){if(typeof this.realm.postMessage=="function"){let e={from:this.inputChannelId,to:t,payload:n};this.realm.postMessage(e,"*")}}subscribeToEndpoint(t,n){return V(this.dataCallbacks,{endpoint:t,fn:n})}sendToEndpoint(t,n,...e){let c=null;e.length&&typeof e[e.length-1]=="function"&&(c=z(),this.sendCallbacks.set(c,e.pop())),this.send({type:n,endpoint:t,data:e,callback:c})}send(t){for(let n of this.connections.keys())this._send(n,t)}onInit(t,n){let e=t.id||null;return e&&(this.ownEndpoints.set(this.ownEndpoints.value.concat(e)),typeof t.getRemoteUI=="function"&&this.endpointGetUI.set(e,t.getRemoteUI)),this.inited?n({connected:this.connected,subscribe:this.subscribeToEndpoint.bind(this,e),getRemoteUI:this.sendToEndpoint.bind(this,e,"getRemoteUI"),send:this.sendToEndpoint.bind(this,e,"data")}):this.initCallbacks.push([t,n]),this}sync(t){let n=z(8)+":"+this.connectTo;return this.onInit(t,e=>{e.subscribe(t.processInput.bind(t)),e.connected.link(c=>{t.setupChannel(n,e.send,this.remoteEndpoints,c)})}),this}};var _=class{name;owner;methods=Object.create(null);remoteMethodWrappers=Object.create(null);remoteMethods=[];listeners=null;constructor(t,n){this.name=t,this.owner=n,this.methods=Object.create(null)}isMethodProvided(t){return t in this.methods}provide(t,n){if(typeof t=="string")typeof n=="function"&&(this.methods[t]=n,this.owner.scheduleProvidedMethodsUpdate());else{let e=t;for(let[c,i]of Object.entries(e))typeof i=="function"&&(this.methods[c]=i,this.owner.scheduleProvidedMethodsUpdate())}}revoke(t){Array.isArray(t)?t.forEach(this.revoke,this):this.isMethodProvided(t)&&(delete this.methods[t],this.owner.scheduleProvidedMethodsUpdate())}isRemoteMethodExists(t){return this.remoteMethods.includes(t)}callRemote(t,...n){let e=null;return n.length&&typeof n[n.length-1]=="function"&&(e=n.pop(),console.warn("[rempl] Using a callback for Namespace#callMethod() is deprecated, use returned promise value instead")),new Promise(c=>{let i={type:"call",ns:this.name,method:t,args:n};this.owner.send(i,(...h)=>{c(h[0]),e?.(...h)})})}getRemoteMethod(t){let n=this.remoteMethodWrappers[t];return typeof n!="function"&&(n=this.remoteMethodWrappers[t]=Object.assign((...e)=>n.available?this.callRemote(t,...e):Promise.reject(new Error(`[rempl] ${this.owner.getName()} ns("${this.name}") has no available remote method "${t}`)),{available:this.remoteMethods.indexOf(t)!==-1})),n}onRemoteMethodsChanged(t){let n={event:"remoteMethodsChanged",callback:t,listeners:this.listeners};return this.listeners=n,t([...this.remoteMethods]),()=>{let e=this.listeners,c=this;for(;e!==null;){if(e===n){c.listeners=e.listeners;break}c=e,e=e.listeners}}}static invoke(t,n,e,c){let i=!1;e=e.concat((...h)=>{i=!0,c(...h),console.warn("[rempl] Using a callback in provided methods has been deprecated, just return a value or promise instead")}),Promise.resolve(t.methods[n].apply(null,e)).then(h=>{i||c(h)})}static notifyRemoteMethodsChanged(t){let n=t.listeners;for(let e in t.remoteMethodWrappers)t.remoteMethodWrappers[e].available=t.remoteMethods.includes(e);for(;n!==null;)n.event==="remoteMethodsChanged"&&n.callback.call(null,[...t.remoteMethods]),n=n.listeners}};var Y=class{id;namespaces;get namespaceClass(){return _}type="Endpoint";channels=[];connected=new L(!1);remoteEndpoints=new W;providedMethodsUpdateTimer;constructor(t){this.id=t||null,this.namespaces=Object.create(null),this.remoteEndpoints.on(n=>{this.connected.set(n.includes(this.id||"*"))},this)}getName(){return this.type+(this.id?"#"+this.id:"")}ns(t){let n=this.namespaces[t];return n||(n=Object.assign(new this.namespaceClass(t,this)),this.namespaces[t]=n),n}send(t,n=null){for(let{send:e}of this.channels)e(t,n)}requestRemoteApi(){this.send({type:"getProvidedMethods"},t=>{this.setRemoteApi(t)})}setRemoteApi(t){let n=[];t||(t={});for(let e in t)if(Array.isArray(t[e])){let c=this.ns(e),i=t[e].slice().sort();(c.remoteMethods.length!==i.length||c.remoteMethods.some(function(d,m){return d!==i[m]}))&&(c.remoteMethods=i,n.push(c))}for(let e in this.namespaces)if(Array.isArray(t[e])===!1){let c=this.namespaces[e];c.remoteMethods=[],n.push(c)}n.forEach(e=>_.notifyRemoteMethodsChanged(e))}getProvidedApi(){let t=Object.create(null);for(let n in this.namespaces)t[n]=Object.keys(this.namespaces[n].methods).sort();return t}scheduleProvidedMethodsUpdate(){this.providedMethodsUpdateTimer||(this.providedMethodsUpdateTimer=setTimeout(()=>{this.providedMethodsUpdateTimer=null,this.send({type:"remoteMethods",methods:this.getProvidedApi()})},0))}processInput(t,n){switch(t.type){case"call":{let e=t,c=this.ns(e.ns||"*");if(!c.isMethodProvided(e.method))return console.warn(`[rempl][sync] ${this.getName()} (namespace: ${e.ns||"default"}) has no remote method:`,e.method);_.invoke(c,e.method,e.args,n);break}case"remoteMethods":{let e=t;this.setRemoteApi(e.methods);break}case"getProvidedMethods":n(this.getProvidedApi());break;default:console.warn("[rempl][sync] "+this.getName()+"Unknown packet type:",t.type)}}setupChannel(t,n,e,c){if(c)this.channels.push({type:t,send:n}),this.remoteEndpoints.add(e);else for(let i=0;i<this.channels.length;i++)if(this.channels[i].type===t&&this.channels[i].send===n){this.remoteEndpoints.remove(e),this.channels.splice(i,1);break}}};var ne=new Map,oe=class extends _{constructor(t,n){super(t,n),ne.set(this,[])}subscribe(t){return this.callRemote("init").then(t),V(ne.get(this)||[],t)}},X=class extends Y{type="Subscriber";get namespaceClass(){return oe}constructor(t){super(t),this.connected.on(n=>{if(n){this.requestRemoteApi();for(let e in this.namespaces){let c=this.namespaces[e],i=ne.get(c)||[];i.length&&c.callRemote("init").then(h=>{for(let d of i)d(h)})}}else this.setRemoteApi()})}processInput(t,n){switch(t.type){case"data":{let{ns:e,payload:c}=t,i=ne.get(this.ns(e||"*"));i&&i.slice().forEach(h=>h(c));break}default:super.processInput(t,n)}}};var Ce=new WeakMap;G!==U&&addEventListener("message",function(l){let t=l.data||{};l.source&&t.to==="rempl-env-publisher:connect"&&Ce.set(l.source,t)},!0);var Me=Ae(fe(),1);function ie(l){let t=new X(l);return j.get("rempl-self-subscriber","rempl-self-publisher").sync(t),Object.assign(t.ns("*"),{connected:t.connected,ns:t.ns.bind(t)})}var de="React Render Tracker",Te=1,Be=2,Ie=3,Pe=4,Ne=5,Oe=6,Ue=7,je=8,De=9,Le=10,_e=11,qe=12,Vn={[Te]:"Class component",[Be]:"Function component",[Ie]:"Memo",[Pe]:"ForwardRef",[Ne]:"Provider",[Oe]:"Consumer",[Ue]:"Render root",[je]:"Host component",[De]:"Suspense",[Le]:"Suspense list",[_e]:"Profiler",[qe]:"Unknown"},Fe=0,We=1,ze=2,Yn={[Fe]:"Legacy Mode",[We]:"Blocking Mode",[ze]:"Concurrent Mode"};var F=ie(de),ae=null,ce=null,D=[],H=[],Q=0,se=!1,J=null,me=new Promise(l=>F.ns("react-renderers").subscribe(t=>{J===null&&t.length>0&&(J=F.ns(t[0].channelId),ae=J.getRemoteMethod("getEvents"),ce=J.getRemoteMethod("getEventsState"),l(J))}));async function ye(){if(!se)try{let l=!1;for(se=!0;D.length<Q&&ae?.available;){let t=await ae(D.length,1e3);if(D.push(...t),!t.length)break;l=!0}if(l)for(let t of H)t()}finally{se=!1}}async function to(l=0,t=1/0){return await He(),await ye(),D.slice(l,l+t)}function no(l,t=D.length){let n=()=>{try{l(D.slice(t)),t=D.length}catch{}};return H.push(n),t<D.length&&l(D.slice(t)),t=D.length,H.subscribed||(me.then(e=>{e.subscribe(c=>{Q=Math.max(Q,c?.count||0),ye()})}),H.subscribed=!0),()=>{let e=H.indexOf(n);e!==-1&&H.splice(e,1)}}async function He(){return ce?.available?(Q=(await ce())?.count||0,Q):0}function oo(){return F.connected.value}function ro(l){return F.connected.link(l),()=>F.connected.off(l)}function io(){return new Promise(l=>{let t=[],n=F.connected.value,e=()=>{n&&t.includes("getEvents")&&(F.connected.off(c),i(),l())},c=h=>{n=h,e()};F.connected.on(c);let i=()=>{};me.then(h=>{i=h.onRemoteMethodsChanged(d=>{t=d,e()})}),e()})}export{He as getEventCount,to as getEvents,oo as isConnected,io as isReady,ro as subscribeConnected,no as subscribeNewEvents};
/*!
 * Socket.IO v2.4.0
 * (c) 2014-2021 Guillermo Rauch
 * Released under the MIT License.
 */
/*! https://mths.be/utf8js v2.1.2 by @mathias */
